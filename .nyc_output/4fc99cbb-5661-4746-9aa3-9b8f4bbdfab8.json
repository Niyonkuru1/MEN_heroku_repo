{"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\model\\authModel.js":{"path":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\model\\authModel.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":19},"end":{"line":5,"column":80}},"2":{"start":{"line":7,"column":25},"end":{"line":7,"column":99}},"3":{"start":{"line":9,"column":16},"end":{"line":9,"column":59}},"4":{"start":{"line":11,"column":17},"end":{"line":11,"column":37}},"5":{"start":{"line":13,"column":14},"end":{"line":13,"column":55}},"6":{"start":{"line":15,"column":17},"end":{"line":28,"column":2}},"7":{"start":{"line":35,"column":0},"end":{"line":65,"column":5}},"8":{"start":{"line":36,"column":13},"end":{"line":60,"column":5}},"9":{"start":{"line":38,"column":4},"end":{"line":59,"column":22}},"10":{"start":{"line":39,"column":6},"end":{"line":58,"column":7}},"11":{"start":{"line":40,"column":8},"end":{"line":57,"column":9}},"12":{"start":{"line":42,"column":12},"end":{"line":42,"column":30}},"13":{"start":{"line":43,"column":12},"end":{"line":43,"column":48}},"14":{"start":{"line":46,"column":12},"end":{"line":46,"column":33}},"15":{"start":{"line":47,"column":12},"end":{"line":47,"column":30}},"16":{"start":{"line":48,"column":12},"end":{"line":48,"column":64}},"17":{"start":{"line":51,"column":12},"end":{"line":51,"column":42}},"18":{"start":{"line":52,"column":12},"end":{"line":52,"column":19}},"19":{"start":{"line":56,"column":12},"end":{"line":56,"column":35}},"20":{"start":{"line":62,"column":2},"end":{"line":64,"column":4}},"21":{"start":{"line":63,"column":4},"end":{"line":63,"column":39}},"22":{"start":{"line":67,"column":0},"end":{"line":117,"column":4}},"23":{"start":{"line":68,"column":14},"end":{"line":112,"column":5}},"24":{"start":{"line":70,"column":4},"end":{"line":111,"column":23}},"25":{"start":{"line":71,"column":6},"end":{"line":110,"column":7}},"26":{"start":{"line":72,"column":8},"end":{"line":109,"column":9}},"27":{"start":{"line":74,"column":12},"end":{"line":74,"column":31}},"28":{"start":{"line":75,"column":12},"end":{"line":77,"column":15}},"29":{"start":{"line":80,"column":12},"end":{"line":80,"column":34}},"30":{"start":{"line":82,"column":12},"end":{"line":85,"column":13}},"31":{"start":{"line":83,"column":14},"end":{"line":83,"column":34}},"32":{"start":{"line":84,"column":14},"end":{"line":84,"column":20}},"33":{"start":{"line":87,"column":12},"end":{"line":87,"column":31}},"34":{"start":{"line":88,"column":12},"end":{"line":88,"column":71}},"35":{"start":{"line":91,"column":12},"end":{"line":91,"column":34}},"36":{"start":{"line":93,"column":12},"end":{"line":96,"column":13}},"37":{"start":{"line":94,"column":14},"end":{"line":94,"column":33}},"38":{"start":{"line":95,"column":14},"end":{"line":95,"column":20}},"39":{"start":{"line":98,"column":12},"end":{"line":98,"column":52}},"40":{"start":{"line":101,"column":12},"end":{"line":101,"column":46}},"41":{"start":{"line":104,"column":12},"end":{"line":104,"column":43}},"42":{"start":{"line":108,"column":12},"end":{"line":108,"column":36}},"43":{"start":{"line":114,"column":2},"end":{"line":116,"column":4}},"44":{"start":{"line":115,"column":4},"end":{"line":115,"column":40}},"45":{"start":{"line":119,"column":13},"end":{"line":119,"column":59}},"46":{"start":{"line":121,"column":0},"end":{"line":121,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":35,"column":36},"end":{"line":35,"column":37}},"loc":{"start":{"line":35,"column":48},"end":{"line":65,"column":1}},"line":35},"1":{"name":"_callee","decl":{"start":{"line":36,"column":100},"end":{"line":36,"column":107}},"loc":{"start":{"line":36,"column":114},"end":{"line":60,"column":3}},"line":36},"2":{"name":"_callee$","decl":{"start":{"line":38,"column":49},"end":{"line":38,"column":57}},"loc":{"start":{"line":38,"column":68},"end":{"line":59,"column":5}},"line":38},"3":{"name":"(anonymous_3)","decl":{"start":{"line":62,"column":9},"end":{"line":62,"column":10}},"loc":{"start":{"line":62,"column":23},"end":{"line":64,"column":3}},"line":62},"4":{"name":"(anonymous_4)","decl":{"start":{"line":67,"column":40},"end":{"line":67,"column":41}},"loc":{"start":{"line":67,"column":52},"end":{"line":117,"column":1}},"line":67},"5":{"name":"_callee2","decl":{"start":{"line":68,"column":101},"end":{"line":68,"column":109}},"loc":{"start":{"line":68,"column":127},"end":{"line":112,"column":3}},"line":68},"6":{"name":"_callee2$","decl":{"start":{"line":70,"column":49},"end":{"line":70,"column":58}},"loc":{"start":{"line":70,"column":70},"end":{"line":111,"column":5}},"line":70},"7":{"name":"(anonymous_7)","decl":{"start":{"line":114,"column":9},"end":{"line":114,"column":10}},"loc":{"start":{"line":114,"column":29},"end":{"line":116,"column":3}},"line":114}},"branchMap":{"0":{"loc":{"start":{"line":40,"column":8},"end":{"line":57,"column":9}},"type":"switch","locations":[{"start":{"line":41,"column":10},"end":{"line":43,"column":48}},{"start":{"line":45,"column":10},"end":{"line":48,"column":64}},{"start":{"line":50,"column":10},"end":{"line":52,"column":19}},{"start":{"line":54,"column":10},"end":{"line":54,"column":17}},{"start":{"line":55,"column":10},"end":{"line":56,"column":35}}],"line":40},"1":{"loc":{"start":{"line":72,"column":8},"end":{"line":109,"column":9}},"type":"switch","locations":[{"start":{"line":73,"column":10},"end":{"line":77,"column":15}},{"start":{"line":79,"column":10},"end":{"line":88,"column":71}},{"start":{"line":90,"column":10},"end":{"line":98,"column":52}},{"start":{"line":100,"column":10},"end":{"line":101,"column":46}},{"start":{"line":103,"column":10},"end":{"line":104,"column":43}},{"start":{"line":106,"column":10},"end":{"line":106,"column":18}},{"start":{"line":107,"column":10},"end":{"line":108,"column":36}}],"line":72},"2":{"loc":{"start":{"line":82,"column":12},"end":{"line":85,"column":13}},"type":"if","locations":[{"start":{"line":82,"column":12},"end":{"line":85,"column":13}},{"start":{"line":82,"column":12},"end":{"line":85,"column":13}}],"line":82},"3":{"loc":{"start":{"line":93,"column":12},"end":{"line":96,"column":13}},"type":"if","locations":[{"start":{"line":93,"column":12},"end":{"line":96,"column":13}},{"start":{"line":93,"column":12},"end":{"line":96,"column":13}}],"line":93}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":2,"10":6,"11":6,"12":2,"13":2,"14":2,"15":2,"16":2,"17":2,"18":2,"19":2,"20":1,"21":2,"22":1,"23":1,"24":2,"25":8,"26":8,"27":2,"28":2,"29":2,"30":2,"31":0,"32":0,"33":2,"34":2,"35":2,"36":2,"37":0,"38":0,"39":2,"40":0,"41":0,"42":2,"43":1,"44":2,"45":1,"46":1},"f":{"0":1,"1":2,"2":6,"3":2,"4":1,"5":2,"6":8,"7":2},"b":{"0":[2,2,2,2,2],"1":[2,2,2,0,0,0,2],"2":[0,2],"3":[0,2]},"inputSourceMap":{"version":3,"sources":["authModel.js"],"names":["userSchema","mongoose","Schema","email","type","String","required","unique","lowercase","validate","isEmail","password","minlength","pre","next","bcrypt","genSalt","salt","hash","statics","login","findOne","user","compare","auth","Error","Userdb","model","module","exports"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAIA,UAAU,GAAG,IAAIC,qBAASC,MAAb,CAAoB;AACjCC,EAAAA,KAAK,EAAE;AACHC,IAAAA,IAAI,EAAEC,MADH;AAEHC,IAAAA,QAAQ,EAAC,CAAC,IAAD,EAAM,uBAAN,CAFN;AAGHC,IAAAA,MAAM,EAAC,IAHJ;AAIHC,IAAAA,SAAS,EAAC,IAJP;AAKHC,IAAAA,QAAQ,EAAE,CAACC,kBAAD,EAAU,8BAAV;AALP,GAD0B;AAQjCC,EAAAA,QAAQ,EAAE;AACNP,IAAAA,IAAI,EAAEC,MADA;AAENC,IAAAA,QAAQ,EAAC,CAAC,IAAD,EAAM,yBAAN,CAFH;AAGNM,IAAAA,SAAS,EAAC,CAAC,CAAD,EAAG,uCAAH;AAHJ;AARuB,CAApB,CAAjB,C,CAeA;AACA;AACA;AACA;AACA;AAEA;;AACAZ,UAAU,CAACa,GAAX,CAAe,MAAf;AAAA,2FAAuB,iBAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEAC,mBAAOC,OAAP,EAFA;;AAAA;AAEbC,YAAAA,IAFa;AAAA;AAAA,mBAGGF,mBAAOG,IAAP,CAAY,KAAKP,QAAjB,EAA2BM,IAA3B,CAHH;;AAAA;AAGnB,iBAAKN,QAHc;AAInBG,YAAAA,IAAI;;AAJe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvB;;AAAA;AAAA;AAAA;AAAA,K,CAQA;;AACAd,UAAU,CAACmB,OAAX,CAAmBC,KAAnB;AAAA,4FAA2B,kBAAgBjB,KAAhB,EAAuBQ,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACJ,KAAKU,OAAL,CAAa;AAAClB,cAAAA,KAAK,EAACA;AAAP,aAAb,CADI;;AAAA;AACjBmB,YAAAA,IADiB;;AAAA,iBAEnBA,IAFmB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAIAP,mBAAOQ,OAAP,CAAeZ,QAAf,EAAyBW,IAAI,CAACX,QAA9B,CAJA;;AAAA;AAIba,YAAAA,IAJa;;AAAA,iBAKfA,IALe;AAAA;AAAA;AAAA;;AAAA,8CAMRF,IANQ;;AAAA;AAAA,kBAOXG,KAAK,CAAC,oBAAD,CAPM;;AAAA;AAAA,kBASjBA,KAAK,CAAE,iBAAF,CATY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA3B;;AAAA;AAAA;AAAA;AAAA;;AAWA,IAAMC,MAAM,GAAGzB,qBAAS0B,KAAT,CAAe,MAAf,EAAuB3B,UAAvB,CAAf;;AAEA4B,MAAM,CAACC,OAAP,GAAiBH,MAAjB","sourceRoot":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\model\\","sourcesContent":["import mongoose from 'mongoose';\r\nimport  {isEmail} from 'validator';\r\nimport bcrypt from \"bcrypt\";\r\n\r\nvar userSchema = new mongoose.Schema({\r\n    email: {\r\n        type: String,\r\n        required:[true,'Please enter an email'],\r\n        unique:true,\r\n        lowercase:true,\r\n        validate: [isEmail, 'Please enter the valid email']\r\n    },\r\n    password: {\r\n        type: String,\r\n        required:[true,'Please enter a password'],\r\n        minlength:[6,'Minimum length should be 6 characters']\r\n    },\r\n});\r\n\r\n//fire a function after adoc has been saved to the database\r\n// userSchema.post('save', function (doc, next){\r\n//     console.log(`new user was created & saved ${doc}`);\r\n//     next();\r\n// })\r\n\r\n// fire a function before saving the doc to the db\r\nuserSchema.pre('save', async function ( next){\r\n    // console.log(`new useer about to be created and saved ${this}`); \r\n    const salt = await bcrypt.genSalt();\r\n    this.password = await bcrypt.hash(this.password, salt);\r\n    next();\r\n})\r\n\r\n\r\n// adding static method to the user \r\nuserSchema.statics.login = async function (email, password){\r\n    const user = await this.findOne({email:email});\r\n    if (user){\r\n        // auth will hold truthy or falsy\r\n        const auth = await bcrypt.compare(password, user.password);\r\n        if (auth) {\r\n            return user\r\n        } throw Error(\"Incorrect password\");\r\n    }\r\n    throw Error (\"Incorrect Email\");\r\n}\r\nconst Userdb = mongoose.model(\"user\", userSchema);\r\n\r\nmodule.exports = Userdb;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1b235cc9610829fae02352b066b72ca2be822471","contentHash":"2199bcf5f163b6c632eedc2ce8a9a1db0275bdb240f758d929c551a83e621fae"},"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server.js":{"path":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":15},"end":{"line":5,"column":57}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":55}},"3":{"start":{"line":9,"column":14},"end":{"line":9,"column":55}},"4":{"start":{"line":11,"column":18},"end":{"line":11,"column":64}},"5":{"start":{"line":13,"column":12},"end":{"line":13,"column":51}},"6":{"start":{"line":15,"column":20},"end":{"line":15,"column":68}},"7":{"start":{"line":17,"column":12},"end":{"line":17,"column":51}},"8":{"start":{"line":19,"column":24},"end":{"line":19,"column":77}},"9":{"start":{"line":21,"column":14},"end":{"line":21,"column":55}},"10":{"start":{"line":23,"column":18},"end":{"line":23,"column":84}},"11":{"start":{"line":25,"column":18},"end":{"line":25,"column":82}},"12":{"start":{"line":27,"column":18},"end":{"line":27,"column":82}},"13":{"start":{"line":32,"column":10},"end":{"line":32,"column":36}},"14":{"start":{"line":33,"column":0},"end":{"line":33,"column":33}},"15":{"start":{"line":35,"column":0},"end":{"line":37,"column":3}},"16":{"start":{"line":40,"column":11},"end":{"line":40,"column":35}},"17":{"start":{"line":43,"column":0},"end":{"line":43,"column":41}},"18":{"start":{"line":44,"column":0},"end":{"line":44,"column":49}},"19":{"start":{"line":49,"column":0},"end":{"line":51,"column":4}},"20":{"start":{"line":54,"column":0},"end":{"line":54,"column":36}},"21":{"start":{"line":55,"column":0},"end":{"line":55,"column":41}},"22":{"start":{"line":64,"column":24},"end":{"line":64,"column":65}},"23":{"start":{"line":66,"column":0},"end":{"line":66,"column":108}},"24":{"start":{"line":69,"column":0},"end":{"line":69,"column":30}},"25":{"start":{"line":70,"column":0},"end":{"line":77,"column":3}},"26":{"start":{"line":71,"column":2},"end":{"line":73,"column":5}},"27":{"start":{"line":74,"column":2},"end":{"line":76,"column":5}},"28":{"start":{"line":80,"column":0},"end":{"line":80,"column":30}},"29":{"start":{"line":89,"column":0},"end":{"line":93,"column":3}},"30":{"start":{"line":90,"column":2},"end":{"line":92,"column":5}},"31":{"start":{"line":95,"column":0},"end":{"line":95,"column":37}},"32":{"start":{"line":96,"column":0},"end":{"line":96,"column":37}},"33":{"start":{"line":97,"column":0},"end":{"line":97,"column":21}},"34":{"start":{"line":98,"column":0},"end":{"line":100,"column":3}},"35":{"start":{"line":99,"column":2},"end":{"line":99,"column":69}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":70,"column":13},"end":{"line":70,"column":14}},"loc":{"start":{"line":70,"column":33},"end":{"line":77,"column":1}},"line":70},"1":{"name":"(anonymous_1)","decl":{"start":{"line":89,"column":24},"end":{"line":89,"column":25}},"loc":{"start":{"line":89,"column":44},"end":{"line":93,"column":1}},"line":89},"2":{"name":"(anonymous_2)","decl":{"start":{"line":98,"column":17},"end":{"line":98,"column":18}},"loc":{"start":{"line":98,"column":29},"end":{"line":100,"column":1}},"line":98}},"branchMap":{"0":{"loc":{"start":{"line":40,"column":11},"end":{"line":40,"column":35}},"type":"binary-expr","locations":[{"start":{"line":40,"column":11},"end":{"line":40,"column":27}},{"start":{"line":40,"column":31},"end":{"line":40,"column":35}}],"line":40}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1},"f":{"0":0,"1":1,"2":1},"b":{"0":[1,0]},"inputSourceMap":{"version":3,"sources":["server.js"],"names":["app","use","dotenv","config","path","resolve","PORT","process","env","express","bodyparser","urlencoded","extended","json","swaggerDefinition","yaml","load","swaggerUi","serve","setup","set","get","req","res","cookie","httpOnly","send","message","status","route","authRoute","module","exports","listen","console","log"],"mappings":";;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAKA;;AACA;;AAEA;;AA8DA;;AACA;;AArEA;AAEA;AAKA;AACA,IAAMA,GAAG,GAAG,0BAAZ;AACAA,GAAG,CAACC,GAAJ,CAAQ,uBAAR,E,CACA;;AACAC,mBAAOC,MAAP,CAAc;AAACC,EAAAA,IAAI,EAAEA,iBAAKC,OAAL,CAAa,cAAb;AAAP,CAAd,E,CACA;;;AACA,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC,C,CAEA;AACA;;AACAN,GAAG,CAACC,GAAJ,CAAQ,wBAAO,MAAP,CAAR;AACAD,GAAG,CAACC,GAAJ,CAAQQ,8BAAe,QAAf,CAAR,E,CACA;AACA;AACA;AAEA;;AACAT,GAAG,CAACC,GAAJ,CAAQS,uBAAWC,UAAX,CAAsB;AAACC,EAAAA,QAAQ,EAAC;AAAV,CAAtB,CAAR,E,CACA;AACA;;AACAZ,GAAG,CAACC,GAAJ,CAAQQ,oBAAQI,IAAR,EAAR;AACAb,GAAG,CAACC,GAAJ,CAAQ,+BAAR,E,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,IAAMa,iBAAiB,GAAGC,mBAAKC,IAAL,CAAU,gBAAV,CAA1B;;AACAhB,GAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiBgB,6BAAUC,KAA3B,EAAkCD,6BAAUE,KAAV,CAAgBL,iBAAhB,CAAlC,E,CAEA;AACA;;AACAd,GAAG,CAACoB,GAAJ,CAAQ,aAAR,EAAsB,KAAtB;AAEApB,GAAG,CAACqB,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAKC,GAAL,EAAW;AACpBA,EAAAA,GAAG,CAACC,MAAJ,CAAW,SAAX,EAAqB,6BAArB,EAAmD;AAACC,IAAAA,QAAQ,EAAC;AAAV,GAAnD;AACAF,EAAAA,GAAG,CAACG,IAAJ,CAAS;AAACC,IAAAA,OAAO,EAAC;AAAT,GAAT;AACH,CAHD,E,CAIA;AACA;;AAEA,8B,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA3B,GAAG,CAACqB,GAAJ,CAAQ,cAAR,EAAwB,UAACC,GAAD,EAAKC,GAAL,EAAW;AAC/BA,EAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBF,IAAhB,CAAqB;AAACC,IAAAA,OAAO,EAAE;AAAV,GAArB;AACH,CAFD;AAMA;AACA3B,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa4B,sBAAb;AACA7B,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAY6B,sBAAZ;AAEAC,MAAM,CAACC,OAAP,GAAiBhC,GAAjB;AAEAA,GAAG,CAACiC,MAAJ,CAAW3B,IAAX,EAAgB,YAAI;AAChB4B,EAAAA,OAAO,CAACC,GAAR,iDAAqD7B,IAArD;AACH,CAFD","sourceRoot":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\","sourcesContent":["import express  from \"express\";\r\nimport  dotenv  from \"dotenv\";\r\nimport  morgan  from \"morgan\";\r\nimport  bodyparser from \"body-parser\"\r\nimport  path  from \"path\";\r\nimport cookieParser from 'cookie-parser';\r\nimport cors from \"cors\";\r\n\r\n// import cors from \"cors\";\r\n\r\n//swagger deps\r\nimport swaggerUi from \"swagger-ui-express\";\r\nimport yaml from \"yamljs\";\r\n\r\nimport  connectDB  from './server/database/connection.js';\r\n// app.use(_path);\r\nconst app = express();\r\napp.use(cors());\r\n// dotenv.config() \r\ndotenv.config({path: path.resolve('./config.env')});\r\n// console.log(process.env.MONGO_URL);/*  as they were the arguments {path:'config.env'} */\r\nconst PORT = process.env.PORT || 8080\r\n\r\n// log request. or logging the messages to the node using the morgan just \r\n//as console did in the browser\r\napp.use(morgan('tiny'));\r\napp.use(express.static('public'));\r\n// app.use(cors());\r\n//connect the database to the app by calling the function defined in the \r\n// database/connection.js\r\n\r\n// parse request to body-parser\r\napp.use(bodyparser.urlencoded({extended:true}));\r\n//this just takes the json type data comes from the submitted form and process it to the regular \r\n//javascript we can use\r\napp.use(express.json());\r\napp.use(cookieParser());\r\n// app.use(function (req, res, next) {\r\n//     res.setHeader('Access-Control-Allow-Origin', '*');\r\n//     res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE');\r\n//     res.setHeader('Access-Control-Allow-Headers', 'Content-Type');\r\n//     res.setHeader('Access-Control-Allow-Credentials', true);\r\n//     next();\r\n//     });\r\n\r\n//swagger setup\r\nconst swaggerDefinition = yaml.load('./swagger.yaml');\r\napp.use('/docs', swaggerUi.serve, swaggerUi.setup(swaggerDefinition));\r\n\r\n// view engine ( where the parser will get the data from\r\n// in terms of format )\r\napp.set('view engine','ejs');\r\n\r\napp.get(\"/\", (req,res)=>{\r\n    res.cookie(\"JEWUTEE\",\"it is not working right now\",{httpOnly:true});\r\n    res.send({message:\"welcome to the routes\"})\r\n})\r\n// app.set('views', path.resolve(__dirname,'views/ejs')) in case your \r\n// ejs files are inside the ejs folder of the views folder\r\n\r\nconnectDB();\r\n\r\n\r\n// load assets. such that if there is a file in the css folder\r\n// you dont need to specify its path exclusively\r\n// just say css/file.css on the rest will be handled by \r\n//path module\r\n// app.use('/css',express.static(path.resolve(__dirname,\"assets/css\")));\r\n// app.use('/img',express.static(path.resolve(__dirname,\"assets/img\")));\r\n// app.use('/js',express.static(path.resolve(__dirname,\"assets/js\")));\r\n\r\n//routes for testing\r\napp.get(\"/api/welcome\", (req,res)=>{\r\n    res.status(302).send({message: \"Welcome to the MEN-REST-API\"});\r\n});\r\n\r\nimport route from './server/routes/blogRoutes.js';\r\nimport authRoute from './server/routes/authRoutes.js';\r\n//To reference to the routes\r\napp.use('/', route);\r\napp.use('/',authRoute);\r\n\r\nmodule.exports = app;\r\n\r\napp.listen(PORT,()=>{\r\n    console.log(`Server is running on http://localhost:${PORT}`)\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8ebebdf31c40ee3075d9d621c79f3f7402f13c2a","contentHash":"0cd03fc68adc8ea4106b48505a82872f985b225c14de7e75727d023ea5f694b8"},"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\database\\connection.js":{"path":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\database\\connection.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":16},"end":{"line":14,"column":35}},"6":{"start":{"line":16,"column":14},"end":{"line":16,"column":55}},"7":{"start":{"line":18,"column":12},"end":{"line":18,"column":51}},"8":{"start":{"line":20,"column":0},"end":{"line":22,"column":3}},"9":{"start":{"line":26,"column":0},"end":{"line":35,"column":1}},"10":{"start":{"line":27,"column":2},"end":{"line":27,"column":33}},"11":{"start":{"line":28,"column":2},"end":{"line":28,"column":22}},"12":{"start":{"line":29,"column":7},"end":{"line":35,"column":1}},"13":{"start":{"line":30,"column":2},"end":{"line":30,"column":38}},"14":{"start":{"line":31,"column":2},"end":{"line":31,"column":22}},"15":{"start":{"line":33,"column":2},"end":{"line":33,"column":41}},"16":{"start":{"line":34,"column":2},"end":{"line":34,"column":22}},"17":{"start":{"line":37,"column":29},"end":{"line":84,"column":3}},"18":{"start":{"line":38,"column":13},"end":{"line":79,"column":5}},"19":{"start":{"line":40,"column":4},"end":{"line":78,"column":32}},"20":{"start":{"line":41,"column":6},"end":{"line":77,"column":7}},"21":{"start":{"line":42,"column":8},"end":{"line":76,"column":9}},"22":{"start":{"line":44,"column":12},"end":{"line":44,"column":30}},"23":{"start":{"line":45,"column":12},"end":{"line":45,"column":30}},"24":{"start":{"line":46,"column":12},"end":{"line":51,"column":15}},"25":{"start":{"line":54,"column":12},"end":{"line":54,"column":32}},"26":{"start":{"line":56,"column":12},"end":{"line":62,"column":13}},"27":{"start":{"line":57,"column":14},"end":{"line":57,"column":174}},"28":{"start":{"line":58,"column":19},"end":{"line":62,"column":13}},"29":{"start":{"line":59,"column":14},"end":{"line":59,"column":171}},"30":{"start":{"line":61,"column":14},"end":{"line":61,"column":128}},"31":{"start":{"line":64,"column":12},"end":{"line":64,"column":31}},"32":{"start":{"line":65,"column":12},"end":{"line":65,"column":18}},"33":{"start":{"line":68,"column":12},"end":{"line":68,"column":30}},"34":{"start":{"line":69,"column":12},"end":{"line":69,"column":47}},"35":{"start":{"line":70,"column":12},"end":{"line":70,"column":37}},"36":{"start":{"line":71,"column":12},"end":{"line":71,"column":28}},"37":{"start":{"line":75,"column":12},"end":{"line":75,"column":35}},"38":{"start":{"line":81,"column":2},"end":{"line":83,"column":4}},"39":{"start":{"line":82,"column":4},"end":{"line":82,"column":39}},"40":{"start":{"line":86,"column":15},"end":{"line":86,"column":24}},"41":{"start":{"line":87,"column":0},"end":{"line":87,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":37,"column":29},"end":{"line":37,"column":30}},"loc":{"start":{"line":37,"column":41},"end":{"line":84,"column":1}},"line":37},"1":{"name":"_callee","decl":{"start":{"line":38,"column":100},"end":{"line":38,"column":107}},"loc":{"start":{"line":38,"column":110},"end":{"line":79,"column":3}},"line":38},"2":{"name":"_callee$","decl":{"start":{"line":40,"column":49},"end":{"line":40,"column":57}},"loc":{"start":{"line":40,"column":68},"end":{"line":78,"column":5}},"line":40},"3":{"name":"connectDB","decl":{"start":{"line":81,"column":18},"end":{"line":81,"column":27}},"loc":{"start":{"line":81,"column":30},"end":{"line":83,"column":3}},"line":81}},"branchMap":{"0":{"loc":{"start":{"line":26,"column":0},"end":{"line":35,"column":1}},"type":"if","locations":[{"start":{"line":26,"column":0},"end":{"line":35,"column":1}},{"start":{"line":26,"column":0},"end":{"line":35,"column":1}}],"line":26},"1":{"loc":{"start":{"line":29,"column":7},"end":{"line":35,"column":1}},"type":"if","locations":[{"start":{"line":29,"column":7},"end":{"line":35,"column":1}},{"start":{"line":29,"column":7},"end":{"line":35,"column":1}}],"line":29},"2":{"loc":{"start":{"line":42,"column":8},"end":{"line":76,"column":9}},"type":"switch","locations":[{"start":{"line":43,"column":10},"end":{"line":51,"column":15}},{"start":{"line":53,"column":10},"end":{"line":65,"column":18}},{"start":{"line":67,"column":10},"end":{"line":71,"column":28}},{"start":{"line":73,"column":10},"end":{"line":73,"column":18}},{"start":{"line":74,"column":10},"end":{"line":75,"column":35}}],"line":42},"3":{"loc":{"start":{"line":56,"column":12},"end":{"line":62,"column":13}},"type":"if","locations":[{"start":{"line":56,"column":12},"end":{"line":62,"column":13}},{"start":{"line":56,"column":12},"end":{"line":62,"column":13}}],"line":56},"4":{"loc":{"start":{"line":58,"column":19},"end":{"line":62,"column":13}},"type":"if","locations":[{"start":{"line":58,"column":19},"end":{"line":62,"column":13}},{"start":{"line":58,"column":19},"end":{"line":62,"column":13}}],"line":58}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":1,"13":1,"14":1,"15":0,"16":0,"17":1,"18":1,"19":1,"20":2,"21":3,"22":1,"23":1,"24":1,"25":1,"26":1,"27":0,"28":1,"29":1,"30":0,"31":1,"32":1,"33":0,"34":0,"35":0,"36":0,"37":1,"38":1,"39":1,"40":1,"41":1},"f":{"0":1,"1":1,"2":2,"3":1},"b":{"0":[0,1],"1":[1,0],"2":[1,1,0,1,1],"3":[0,1],"4":[1,0]},"inputSourceMap":{"version":3,"sources":["connection.js"],"names":["dotenv","config","path","resolve","DB_URL","process","env","NODE_ENV","MONGO_URL","console","log","MONGO_URL_TEST","MONGO_URL_DEFAULT","connectDB","mongoose","connect","useNewUrlParser","useUnifiedTopology","con","connection","host","toLocaleUpperCase","exit"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEAA,mBAAOC,MAAP,CAAc;AAACC,EAAAA,IAAI,EAAEA,iBAAKC,OAAL,CAAa,cAAb;AAAP,CAAd;;AAGA,IAAIC,MAAJ;;AAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,YAA5B,EAAyC;AACrCH,EAAAA,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYE,SAArB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYN,MAAZ;AAEH,CAJD,MAMK,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,MAA5B,EAAmC;AACpCH,EAAAA,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYK,cAArB;AACAF,EAAAA,OAAO,CAACC,GAAR,CAAYN,MAAZ;AAEH,CAJI,MAMD;AACAA,EAAAA,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYM,iBAArB;AACAH,EAAAA,OAAO,CAACC,GAAR,CAAYN,MAAZ;AACH;;AAED,IAAMS,SAAS;AAAA,2FAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAGQC,mBAASC,OAAT,CAAiBX,MAAjB,EAAyB;AACvCY,cAAAA,eAAe,EAAC,IADuB;AAEvCC,cAAAA,kBAAkB,EAAC,IAFoB,CAGvC;AACA;;AAJuC,aAAzB,CAHR;;AAAA;AAGJC,YAAAA,GAHI;;AAST,gBAAIb,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,YAA5B,EAAyC;AACtCE,cAAAA,OAAO,CAACC,GAAR,6BAAiCQ,GAAG,CAACC,UAAJ,CAAeC,IAAhD,iDACMf,OAAO,CAACC,GAAR,CAAYC,QAAZ,CAAqBc,iBAArB,EADN;AAEH,aAHA,MAKI,IAAIhB,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,MAA5B,EAAmC;AACpCE,cAAAA,OAAO,CAACC,GAAR,6BAAiCQ,GAAG,CAACC,UAAJ,CAAeC,IAAhD,8CACGf,OAAO,CAACC,GAAR,CAAYC,QAAZ,CAAqBc,iBAArB,EADH;AAEH,aAHI,MAKD;AACAZ,cAAAA,OAAO,CAACC,GAAR,6BAAiCQ,GAAG,CAACC,UAAJ,CAAeC,IAAhD;AAEH;;AAtBS;AAAA;;AAAA;AAAA;AAAA;AAwBVX,YAAAA,OAAO,CAACC,GAAR;AACAL,YAAAA,OAAO,CAACiB,IAAR,CAAa,CAAb;;AAzBU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATT,SAAS;AAAA;AAAA;AAAA,GAAf;;eA6BeA,S","sourceRoot":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\database\\","sourcesContent":["import {mongoose} from \"mongoose\";\r\nimport dotenv from \"dotenv\";\r\nimport  path  from \"path\";\r\n\r\ndotenv.config({path: path.resolve('./config.env')});\r\n\r\n\r\nvar DB_URL;\r\n\r\nif (process.env.NODE_ENV == \"production\"){\r\n    DB_URL = process.env.MONGO_URL;\r\n    console.log(DB_URL);\r\n\r\n}\r\n\r\nelse if (process.env.NODE_ENV == \"test\"){\r\n    DB_URL = process.env.MONGO_URL_TEST;\r\n    console.log(DB_URL);\r\n\r\n}\r\n\r\nelse{\r\n    DB_URL = process.env.MONGO_URL_DEFAULT;\r\n    console.log(DB_URL);\r\n}\r\n\r\nconst connectDB = async () => {\r\n    try{\r\n        //mongodb connection string\r\n        const con = await mongoose.connect(DB_URL, {\r\n            useNewUrlParser:true,\r\n            useUnifiedTopology:true\r\n            // useFindAndModify:true,\r\n            // useCreateIndex:true\r\n        })\r\n         if (process.env.NODE_ENV == \"production\"){\r\n            console.log(`mongoDB connected:${con.connection.host} and is running in\r\n            the ${process.env.NODE_ENV.toLocaleUpperCase()} MODE`);\r\n        }\r\n        \r\n        else if (process.env.NODE_ENV == \"test\"){\r\n            console.log(`mongoDB connected:${con.connection.host} and is running in\r\n         the ${process.env.NODE_ENV.toLocaleUpperCase()} MODE`);\r\n        }\r\n        \r\n        else{\r\n            console.log(`mongoDB connected:${con.connection.host} and is running in\r\n            the DEFAULT MODE`);\r\n        }\r\n    } catch(error){\r\n        console.log(error);\r\n        process.exit(1);\r\n    }\r\n}\r\n\r\nexport default connectDB ;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"077050e57b778472a6a0cce3650464e5c7f41f44","contentHash":"4b1e83f04a341c7c3a62b2c62c015124d50a192187a92c9b72c967feeed0bdd4"},"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\routes\\blogRoutes.js":{"path":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\routes\\blogRoutes.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":15},"end":{"line":5,"column":57}},"2":{"start":{"line":7,"column":22},"end":{"line":7,"column":61}},"3":{"start":{"line":9,"column":22},"end":{"line":9,"column":85}},"4":{"start":{"line":11,"column":12},"end":{"line":11,"column":40}},"5":{"start":{"line":14,"column":0},"end":{"line":28,"column":1}},"6":{"start":{"line":15,"column":2},"end":{"line":15,"column":51}},"7":{"start":{"line":16,"column":2},"end":{"line":16,"column":48}},"8":{"start":{"line":17,"column":2},"end":{"line":17,"column":52}},"9":{"start":{"line":18,"column":2},"end":{"line":18,"column":65}},"10":{"start":{"line":19,"column":2},"end":{"line":19,"column":54}},"11":{"start":{"line":20,"column":2},"end":{"line":20,"column":87}},"12":{"start":{"line":22,"column":2},"end":{"line":22,"column":79}},"13":{"start":{"line":23,"column":2},"end":{"line":23,"column":48}},"14":{"start":{"line":24,"column":2},"end":{"line":24,"column":52}},"15":{"start":{"line":25,"column":2},"end":{"line":25,"column":65}},"16":{"start":{"line":26,"column":2},"end":{"line":26,"column":82}},"17":{"start":{"line":27,"column":2},"end":{"line":27,"column":87}},"18":{"start":{"line":30,"column":0},"end":{"line":30,"column":23}}},"fnMap":{},"branchMap":{"0":{"loc":{"start":{"line":14,"column":0},"end":{"line":28,"column":1}},"type":"if","locations":[{"start":{"line":14,"column":0},"end":{"line":28,"column":1}},{"start":{"line":14,"column":0},"end":{"line":28,"column":1}}],"line":14},"1":{"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":74}},"type":"binary-expr","locations":[{"start":{"line":14,"column":4},"end":{"line":14,"column":34}},{"start":{"line":14,"column":38},"end":{"line":14,"column":74}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"f":{},"b":{"0":[1,0],"1":[1,0]},"inputSourceMap":{"version":3,"sources":["blogRoutes.js"],"names":["route","express","Router","process","env","NODE_ENV","post","create","get","find","put","addComment","update","requireAuth","delet","module","exports"],"mappings":";;;;AAAA;;AACA;;AACA;;AACA,IAAMA,KAAK,GAAGC,oBAAQC,MAAR,EAAd,C,CAEA;;;AACA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,MAAxB,IAAkCF,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,YAA9D,EAA4E;AACxEL,EAAAA,KAAK,CAACM,IAAN,CAAW,YAAX,EAAyBC,sBAAzB;AACAP,EAAAA,KAAK,CAACQ,GAAN,CAAU,YAAV,EAAwBC,oBAAxB;AACAT,EAAAA,KAAK,CAACQ,GAAN,CAAU,gBAAV,EAA4BC,oBAA5B;AACAT,EAAAA,KAAK,CAACU,GAAN,CAAU,uBAAV,EAAkCC,0BAAlC;AACAX,EAAAA,KAAK,CAACU,GAAN,CAAU,gBAAV,EAA4BE,sBAA5B;AACAZ,EAAAA,KAAK,UAAL,CAAa,gBAAb,EAA+Ba,0BAA/B,EAA4CC,qBAA5C;AACH,CAPD,MASK;AACDd,EAAAA,KAAK,CAACM,IAAN,CAAW,YAAX,EAAyBO,0BAAzB,EAAsCN,sBAAtC;AACAP,EAAAA,KAAK,CAACQ,GAAN,CAAU,YAAV,EAAwBC,oBAAxB;AACAT,EAAAA,KAAK,CAACQ,GAAN,CAAU,gBAAV,EAA4BC,oBAA5B;AACAT,EAAAA,KAAK,CAACU,GAAN,CAAU,uBAAV,EAAkCC,0BAAlC;AACAX,EAAAA,KAAK,CAACU,GAAN,CAAU,gBAAV,EAA4BG,0BAA5B,EAAyCD,sBAAzC;AACAZ,EAAAA,KAAK,UAAL,CAAa,gBAAb,EAA+Ba,0BAA/B,EAA4CC,qBAA5C;AACH;;AAEDC,MAAM,CAACC,OAAP,GAAiBhB,KAAjB","sourceRoot":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\routes\\","sourcesContent":["import express from 'express';\r\nimport { create, find, update, delet, addComment } from '../controller/blogController';\r\nimport requireAuth from '../middleware/authMiddleware';\r\nconst route = express.Router();\r\n\r\n// API then \r\nif (process.env.NODE_ENV == \"test\" || process.env.NODE_ENV == \"production\") {\r\n    route.post('/api/blogs', create);\r\n    route.get('/api/blogs', find);\r\n    route.get('/api/blogs/:id', find);\r\n    route.put('/api/blogs/addcom/:id',addComment);\r\n    route.put('/api/blogs/:id', update);\r\n    route.delete('/api/blogs/:id', requireAuth, delet);\r\n}\r\n\r\nelse {\r\n    route.post('/api/blogs', requireAuth, create);\r\n    route.get('/api/blogs', find);\r\n    route.get('/api/blogs/:id', find);\r\n    route.put('/api/blogs/addcom/:id',addComment);\r\n    route.put('/api/blogs/:id', requireAuth, update);\r\n    route.delete('/api/blogs/:id', requireAuth, delet);\r\n}\r\n\r\nmodule.exports = route;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"546677ca43af1b368144b17fb1058396e34f60ef","contentHash":"1e130b0d5599fa83fe000a58a59a783e5a6aa72734393c488509786f671511e0"},"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\controller\\blogController.js":{"path":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\controller\\blogController.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":93}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":62}},"4":{"start":{"line":13,"column":13},"end":{"line":39,"column":1}},"5":{"start":{"line":15,"column":2},"end":{"line":38,"column":3}},"6":{"start":{"line":16,"column":4},"end":{"line":18,"column":7}},"7":{"start":{"line":22,"column":16},"end":{"line":27,"column":6}},"8":{"start":{"line":29,"column":4},"end":{"line":37,"column":7}},"9":{"start":{"line":31,"column":6},"end":{"line":31,"column":33}},"10":{"start":{"line":34,"column":6},"end":{"line":36,"column":9}},"11":{"start":{"line":42,"column":0},"end":{"line":42,"column":24}},"12":{"start":{"line":44,"column":11},"end":{"line":74,"column":1}},"13":{"start":{"line":45,"column":2},"end":{"line":73,"column":3}},"14":{"start":{"line":46,"column":13},"end":{"line":46,"column":26}},"15":{"start":{"line":48,"column":4},"end":{"line":63,"column":7}},"16":{"start":{"line":49,"column":6},"end":{"line":57,"column":7}},"17":{"start":{"line":51,"column":8},"end":{"line":53,"column":11}},"18":{"start":{"line":56,"column":8},"end":{"line":56,"column":35}},"19":{"start":{"line":60,"column":6},"end":{"line":62,"column":9}},"20":{"start":{"line":65,"column":4},"end":{"line":72,"column":7}},"21":{"start":{"line":66,"column":6},"end":{"line":66,"column":34}},"22":{"start":{"line":69,"column":6},"end":{"line":71,"column":9}},"23":{"start":{"line":77,"column":0},"end":{"line":77,"column":20}},"24":{"start":{"line":79,"column":13},"end":{"line":114,"column":1}},"25":{"start":{"line":80,"column":2},"end":{"line":84,"column":3}},"26":{"start":{"line":81,"column":4},"end":{"line":83,"column":7}},"27":{"start":{"line":86,"column":11},"end":{"line":86,"column":24}},"28":{"start":{"line":88,"column":2},"end":{"line":113,"column":5}},"29":{"start":{"line":91,"column":4},"end":{"line":108,"column":7}},"30":{"start":{"line":92,"column":6},"end":{"line":103,"column":7}},"31":{"start":{"line":93,"column":8},"end":{"line":95,"column":11}},"32":{"start":{"line":97,"column":8},"end":{"line":102,"column":11}},"33":{"start":{"line":105,"column":6},"end":{"line":107,"column":9}},"34":{"start":{"line":110,"column":4},"end":{"line":112,"column":7}},"35":{"start":{"line":117,"column":0},"end":{"line":117,"column":24}},"36":{"start":{"line":119,"column":17},"end":{"line":139,"column":1}},"37":{"start":{"line":120,"column":19},"end":{"line":120,"column":34}},"38":{"start":{"line":121,"column":2},"end":{"line":121,"column":29}},"39":{"start":{"line":123,"column":2},"end":{"line":138,"column":5}},"40":{"start":{"line":130,"column":4},"end":{"line":137,"column":5}},"41":{"start":{"line":131,"column":6},"end":{"line":131,"column":25}},"42":{"start":{"line":134,"column":6},"end":{"line":136,"column":9}},"43":{"start":{"line":142,"column":0},"end":{"line":142,"column":32}},"44":{"start":{"line":144,"column":12},"end":{"line":163,"column":1}},"45":{"start":{"line":145,"column":11},"end":{"line":145,"column":24}},"46":{"start":{"line":147,"column":2},"end":{"line":162,"column":5}},"47":{"start":{"line":148,"column":4},"end":{"line":157,"column":5}},"48":{"start":{"line":149,"column":6},"end":{"line":151,"column":9}},"49":{"start":{"line":152,"column":6},"end":{"line":152,"column":24}},"50":{"start":{"line":154,"column":6},"end":{"line":156,"column":9}},"51":{"start":{"line":159,"column":4},"end":{"line":161,"column":7}},"52":{"start":{"line":165,"column":0},"end":{"line":165,"column":22}}},"fnMap":{"0":{"name":"create","decl":{"start":{"line":13,"column":22},"end":{"line":13,"column":28}},"loc":{"start":{"line":13,"column":39},"end":{"line":39,"column":1}},"line":13},"1":{"name":"(anonymous_1)","decl":{"start":{"line":29,"column":27},"end":{"line":29,"column":28}},"loc":{"start":{"line":29,"column":43},"end":{"line":32,"column":5}},"line":29},"2":{"name":"(anonymous_2)","decl":{"start":{"line":32,"column":16},"end":{"line":32,"column":17}},"loc":{"start":{"line":32,"column":33},"end":{"line":37,"column":5}},"line":32},"3":{"name":"find","decl":{"start":{"line":44,"column":20},"end":{"line":44,"column":24}},"loc":{"start":{"line":44,"column":35},"end":{"line":74,"column":1}},"line":44},"4":{"name":"(anonymous_4)","decl":{"start":{"line":48,"column":40},"end":{"line":48,"column":41}},"loc":{"start":{"line":48,"column":56},"end":{"line":58,"column":5}},"line":48},"5":{"name":"(anonymous_5)","decl":{"start":{"line":58,"column":16},"end":{"line":58,"column":17}},"loc":{"start":{"line":58,"column":33},"end":{"line":63,"column":5}},"line":58},"6":{"name":"(anonymous_6)","decl":{"start":{"line":65,"column":34},"end":{"line":65,"column":35}},"loc":{"start":{"line":65,"column":51},"end":{"line":67,"column":5}},"line":65},"7":{"name":"(anonymous_7)","decl":{"start":{"line":67,"column":16},"end":{"line":67,"column":17}},"loc":{"start":{"line":67,"column":33},"end":{"line":72,"column":5}},"line":67},"8":{"name":"update","decl":{"start":{"line":79,"column":22},"end":{"line":79,"column":28}},"loc":{"start":{"line":79,"column":39},"end":{"line":114,"column":1}},"line":79},"9":{"name":"(anonymous_9)","decl":{"start":{"line":90,"column":10},"end":{"line":90,"column":11}},"loc":{"start":{"line":90,"column":26},"end":{"line":109,"column":3}},"line":90},"10":{"name":"(anonymous_10)","decl":{"start":{"line":91,"column":40},"end":{"line":91,"column":41}},"loc":{"start":{"line":91,"column":56},"end":{"line":104,"column":5}},"line":91},"11":{"name":"(anonymous_11)","decl":{"start":{"line":104,"column":16},"end":{"line":104,"column":17}},"loc":{"start":{"line":104,"column":33},"end":{"line":108,"column":5}},"line":104},"12":{"name":"(anonymous_12)","decl":{"start":{"line":109,"column":14},"end":{"line":109,"column":15}},"loc":{"start":{"line":109,"column":29},"end":{"line":113,"column":3}},"line":109},"13":{"name":"addComment","decl":{"start":{"line":119,"column":26},"end":{"line":119,"column":36}},"loc":{"start":{"line":119,"column":47},"end":{"line":139,"column":1}},"line":119},"14":{"name":"(anonymous_14)","decl":{"start":{"line":129,"column":5},"end":{"line":129,"column":6}},"loc":{"start":{"line":129,"column":31},"end":{"line":138,"column":3}},"line":129},"15":{"name":"delet","decl":{"start":{"line":144,"column":21},"end":{"line":144,"column":26}},"loc":{"start":{"line":144,"column":37},"end":{"line":163,"column":1}},"line":144},"16":{"name":"(anonymous_16)","decl":{"start":{"line":147,"column":47},"end":{"line":147,"column":48}},"loc":{"start":{"line":147,"column":63},"end":{"line":158,"column":3}},"line":147},"17":{"name":"(anonymous_17)","decl":{"start":{"line":158,"column":14},"end":{"line":158,"column":15}},"loc":{"start":{"line":158,"column":31},"end":{"line":162,"column":3}},"line":158}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":2},"end":{"line":38,"column":3}},"type":"if","locations":[{"start":{"line":15,"column":2},"end":{"line":38,"column":3}},{"start":{"line":15,"column":2},"end":{"line":38,"column":3}}],"line":15},"1":{"loc":{"start":{"line":45,"column":2},"end":{"line":73,"column":3}},"type":"if","locations":[{"start":{"line":45,"column":2},"end":{"line":73,"column":3}},{"start":{"line":45,"column":2},"end":{"line":73,"column":3}}],"line":45},"2":{"loc":{"start":{"line":49,"column":6},"end":{"line":57,"column":7}},"type":"if","locations":[{"start":{"line":49,"column":6},"end":{"line":57,"column":7}},{"start":{"line":49,"column":6},"end":{"line":57,"column":7}}],"line":49},"3":{"loc":{"start":{"line":70,"column":17},"end":{"line":70,"column":83}},"type":"binary-expr","locations":[{"start":{"line":70,"column":17},"end":{"line":70,"column":30}},{"start":{"line":70,"column":34},"end":{"line":70,"column":83}}],"line":70},"4":{"loc":{"start":{"line":80,"column":2},"end":{"line":84,"column":3}},"type":"if","locations":[{"start":{"line":80,"column":2},"end":{"line":84,"column":3}},{"start":{"line":80,"column":2},"end":{"line":84,"column":3}}],"line":80},"5":{"loc":{"start":{"line":92,"column":6},"end":{"line":103,"column":7}},"type":"if","locations":[{"start":{"line":92,"column":6},"end":{"line":103,"column":7}},{"start":{"line":92,"column":6},"end":{"line":103,"column":7}}],"line":92},"6":{"loc":{"start":{"line":130,"column":4},"end":{"line":137,"column":5}},"type":"if","locations":[{"start":{"line":130,"column":4},"end":{"line":137,"column":5}},{"start":{"line":130,"column":4},"end":{"line":137,"column":5}}],"line":130},"7":{"loc":{"start":{"line":148,"column":4},"end":{"line":157,"column":5}},"type":"if","locations":[{"start":{"line":148,"column":4},"end":{"line":157,"column":5}},{"start":{"line":148,"column":4},"end":{"line":157,"column":5}}],"line":148}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":0,"7":3,"8":3,"9":3,"10":0,"11":1,"12":1,"13":4,"14":1,"15":1,"16":1,"17":0,"18":1,"19":0,"20":3,"21":3,"22":0,"23":1,"24":1,"25":1,"26":0,"27":1,"28":1,"29":1,"30":1,"31":0,"32":1,"33":0,"34":0,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":0,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":0,"49":0,"50":1,"51":0,"52":1},"f":{"0":3,"1":3,"2":0,"3":4,"4":1,"5":0,"6":3,"7":0,"8":1,"9":1,"10":1,"11":0,"12":0,"13":1,"14":1,"15":1,"16":1,"17":0},"b":{"0":[0,3],"1":[1,3],"2":[0,1],"3":[0,0],"4":[0,1],"5":[0,1],"6":[0,1],"7":[0,1]},"inputSourceMap":{"version":3,"sources":["blogController.js"],"names":["create","req","res","body","status","send","message","bloge","Blogdb","title","author","date","save","then","data","error","find","params","id","findById","json","blogs","update","findByIdAndUpdate","userFindAndModify","err","addComment","newComment","newCom","console","log","findOneAndUpdate","_id","$push","comments","success","delet","findByIdAndDelete","mesage"],"mappings":"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","sourceRoot":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\controller\\","sourcesContent":["import Blogdb from '../model/model';\r\n\r\n\r\n//create and save new blog\r\nexport const create = (req,res)=>{\r\n    //validate request\r\n    if (!req.body){\r\n        res.status(400).send({\r\n            message: \"Content can not be empty\"\r\n        });\r\n    }\r\n    // console.log(req.body);\r\n    //new blog\r\n  else {\r\n    const bloge = new Blogdb({\r\n        title: req.body.title,\r\n        body: req.body.body,\r\n        author: req.body.author,\r\n        date: req.body.date\r\n    })\r\n    //save blog to database\r\n    bloge\r\n    .save(bloge)\r\n    .then ((data) =>{\r\n        // console.log(data);\r\n        res.status(201).send(data);\r\n    })\r\n    .catch((error)=>{\r\n        // console(req.body);\r\n        res.status(500).send({\r\n            message: \"Some error occured while creating a create operation\"\r\n        });\r\n    });\r\n  }\r\n\r\n}\r\n\r\n//retrieve and return all blogs / retrieve and return a single user\r\nexport const find = (req,res)=>{\r\n    if (req.params.id){\r\n        const id = req.params.id;\r\n        // console.log('hello hello ' + id);\r\n        Blogdb.findById(id)\r\n        .then((data)=>{\r\n            if (!data){\r\n                // res.status(404).send({message: \"Not found user with id\" + id})\r\n                res.status(404).json({message: \"Not found user with id\"});\r\n            }\r\n            else {\r\n                // res.send(data)\r\n                res.status(200).json(data);\r\n            }\r\n        })\r\n        .catch((error)=>{\r\n            // res.status(500).send({message: \"Error retrieving the user with id: \" + id})\r\n            res.status(500).json({message: \"Error retrieving the user with id: \" + id})\r\n        })\r\n    }\r\n\r\n    else {\r\n        Blogdb.find()\r\n        .then((blogs)=>{\r\n            res.status(202).send(blogs);\r\n        })\r\n        .catch((error)=>{\r\n            // res.status(500).send({message:error.message || 'Error Occured while retrieving blog information'})\r\n            res.status(500).json({message:error.message || 'Error Occured while retrieving blog information'})\r\n        })\r\n    }\r\n}\r\n\r\n//update a new identified blog with the blog id\r\nexport const update = (req,res)=>{\r\nif (!req.body){\r\n    return res\r\n    .status(400)\r\n    .send({message: \"No content to update, point the correct blog\"})\r\n}\r\nconst id = req.params.id;\r\nBlogdb.findByIdAndUpdate(id, req.body, {userFindAndModify:false})\r\n.then((data)=>{\r\n    Blogdb.findById(id)\r\n        .then((data)=>{\r\n            if (!data){\r\n                res.status(404).send({message: \"No content to update\"});\r\n            }\r\n            else {\r\n                res.status(205).send({\r\n                    title:data.title,\r\n                    body:data.body,\r\n                    author:data.author,\r\n                    date:data.date\r\n                })\r\n            }\r\n})\r\n.catch((error)=>{\r\n    res.status(404).send({message: \"No content to update\"});\r\n})\r\n})\r\n.catch((err)=>{\r\n    res.status(400).send({message: \"Not blog found with the provided ID\"})\r\n})\r\n}\r\n\r\n//add comment to the specified blogs by pushing that information to the array\r\nexport const addComment = (req,res) =>{\r\n    var newComment = req.body.newCom;\r\n    console.log(req.params.id);\r\n    // console.log(newComment);\r\nBlogdb.findOneAndUpdate(\r\n   { _id: req.params.id }, \r\n   { $push: { comments: newComment  } },\r\n  function (error, success) {\r\n        if (error) {\r\n            console.log(error);\r\n        } else {\r\n            // console.log(success);\r\n            res.status(201).send({message: `comment content created`})\r\n        }\r\n    });\r\n}\r\n// delete the blog with the blog is specified in the request\r\nexport const delet = (req,res)=>{\r\n    const id = req.params.id;\r\n\r\n    Blogdb.findByIdAndDelete(id)\r\n    .then((data)=>{\r\n        if(!data){\r\n            res.status(403).send({mesage: `Content to delete already doesn't exist`})\r\n            console.log(data)\r\n        }\r\n        else {\r\n            res.status(202).send({\r\n                message: 'Blogs deleted Successfuly!!'\r\n            })\r\n            // console.log(data)\r\n        }\r\n    })\r\n    .catch((error) =>{\r\n        res.status(500).send({\r\n            message: `Error occured while deleting the blog`\r\n        });\r\n    });\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7ee68d1e8fa435519934f191a36b283be27ff184","contentHash":"71f402fb6a1f12c39a63fe5b645be7097b56f6799c01a44003fe2d57f5b7b35a"},"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\model\\model.js":{"path":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\model\\model.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":16},"end":{"line":5,"column":59}},"2":{"start":{"line":7,"column":13},"end":{"line":22,"column":2}},"3":{"start":{"line":24,"column":13},"end":{"line":24,"column":56}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":24}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["model.js"],"names":["schema","mongoose","Schema","title","type","String","body","author","date","comments","Blogdb","model","module","exports"],"mappings":";;;;AAAA;;AACA,IAAIA,MAAM,GAAG,IAAIC,qBAASC,MAAb,CAAoB;AAC7BC,EAAAA,KAAK,EAAE;AACHC,IAAAA,IAAI,EAAEC,MADH,CAEH;;AAFG,GADsB;AAK7BC,EAAAA,IAAI,EAAE;AACFF,IAAAA,IAAI,EAAEC,MADJ,CAEF;AACA;;AAHE,GALuB;AAU7BE,EAAAA,MAAM,EAAEF,MAVqB;AAW7BG,EAAAA,IAAI,EAAEH,MAXuB;AAa7BI,EAAAA,QAAQ,EAAE,CACN;AAAEL,IAAAA,IAAI,EAAEC;AAAR,GADM;AAbmB,CAApB,CAAb;;AAmBA,IAAMK,MAAM,GAAGT,qBAASU,KAAT,CAAe,OAAf,EAAwBX,MAAxB,CAAf;;AAEAY,MAAM,CAACC,OAAP,GAAiBH,MAAjB","sourceRoot":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\model\\","sourcesContent":["import mongoose from 'mongoose';\r\nvar schema = new mongoose.Schema({\r\n    title: {\r\n        type: String,\r\n        // required:true\r\n    },\r\n    body: {\r\n        type: String,\r\n        // required:true\r\n        // unique:true\r\n    },\r\n    author: String,\r\n    date: String,\r\n\r\n    comments: [\r\n        { type: String}\r\n    ]\r\n       \r\n})\r\n\r\nconst Blogdb = mongoose.model(\"bloge\", schema);\r\n\r\nmodule.exports = Blogdb;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3ffd69ac8470e5f8ef9957b4ddb6e3d58438db31","contentHash":"3f271d9a94b580cfd64ce7c8d03220a0c424544bd1d3f815f6907e2e3bc4f909"},"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\middleware\\authMiddleware.js":{"path":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\middleware\\authMiddleware.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":55}},"4":{"start":{"line":12,"column":12},"end":{"line":12,"column":51}},"5":{"start":{"line":14,"column":10},"end":{"line":14,"column":33}},"6":{"start":{"line":16,"column":0},"end":{"line":18,"column":3}},"7":{"start":{"line":20,"column":18},"end":{"line":60,"column":1}},"8":{"start":{"line":28,"column":2},"end":{"line":34,"column":3}},"9":{"start":{"line":29,"column":4},"end":{"line":29,"column":48}},"10":{"start":{"line":30,"column":9},"end":{"line":34,"column":3}},"11":{"start":{"line":31,"column":4},"end":{"line":31,"column":34}},"12":{"start":{"line":33,"column":4},"end":{"line":33,"column":48}},"13":{"start":{"line":36,"column":2},"end":{"line":59,"column":3}},"14":{"start":{"line":38,"column":20},"end":{"line":38,"column":43}},"15":{"start":{"line":39,"column":22},"end":{"line":39,"column":34}},"16":{"start":{"line":41,"column":4},"end":{"line":53,"column":5}},"17":{"start":{"line":42,"column":6},"end":{"line":51,"column":9}},"18":{"start":{"line":43,"column":8},"end":{"line":50,"column":9}},"19":{"start":{"line":45,"column":10},"end":{"line":47,"column":13}},"20":{"start":{"line":49,"column":10},"end":{"line":49,"column":17}},"21":{"start":{"line":56,"column":4},"end":{"line":58,"column":7}},"22":{"start":{"line":62,"column":15},"end":{"line":62,"column":26}},"23":{"start":{"line":63,"column":0},"end":{"line":63,"column":30}}},"fnMap":{"0":{"name":"requireAuth","decl":{"start":{"line":20,"column":27},"end":{"line":20,"column":38}},"loc":{"start":{"line":20,"column":55},"end":{"line":60,"column":1}},"line":20},"1":{"name":"(anonymous_1)","decl":{"start":{"line":42,"column":57},"end":{"line":42,"column":58}},"loc":{"start":{"line":42,"column":86},"end":{"line":51,"column":7}},"line":42}},"branchMap":{"0":{"loc":{"start":{"line":28,"column":2},"end":{"line":34,"column":3}},"type":"if","locations":[{"start":{"line":28,"column":2},"end":{"line":34,"column":3}},{"start":{"line":28,"column":2},"end":{"line":34,"column":3}}],"line":28},"1":{"loc":{"start":{"line":30,"column":9},"end":{"line":34,"column":3}},"type":"if","locations":[{"start":{"line":30,"column":9},"end":{"line":34,"column":3}},{"start":{"line":30,"column":9},"end":{"line":34,"column":3}}],"line":30},"2":{"loc":{"start":{"line":36,"column":2},"end":{"line":59,"column":3}},"type":"if","locations":[{"start":{"line":36,"column":2},"end":{"line":59,"column":3}},{"start":{"line":36,"column":2},"end":{"line":59,"column":3}}],"line":36},"3":{"loc":{"start":{"line":41,"column":4},"end":{"line":53,"column":5}},"type":"if","locations":[{"start":{"line":41,"column":4},"end":{"line":53,"column":5}},{"start":{"line":41,"column":4},"end":{"line":53,"column":5}}],"line":41},"4":{"loc":{"start":{"line":43,"column":8},"end":{"line":50,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":50,"column":9}},{"start":{"line":43,"column":8},"end":{"line":50,"column":9}}],"line":43}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":1,"11":1,"12":0,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":1,"21":0,"22":1,"23":1},"f":{"0":1,"1":1},"b":{"0":[0,1],"1":[1,0],"2":[1,0],"3":[1,0],"4":[0,1]},"inputSourceMap":{"version":3,"sources":["authMiddleware.js"],"names":["jwt","require","dotenv","config","path","resolve","requireAuth","req","res","next","bearerHeader","process","env","NODE_ENV","headers","body","token","bearerArr","split","bearerToken","verify","SECRET_KEY_DB","err","decodedToken","status","json","Error_message"],"mappings":";;;;;;;;;AACA;;AACA;;AAFA,IAAMA,GAAG,GAAGC,OAAO,CAAC,cAAD,CAAnB;;AAIAC,mBAAOC,MAAP,CAAc;AAACC,EAAAA,IAAI,EAAEA,iBAAKC,OAAL,CAAa,cAAb;AAAP,CAAd;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAkB;AAElC;AACA;AAEA;AACA;AAEA;AACA,MAAIC,YAAJ;;AACJ,MAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,YAA5B,EAAyC;AACrCH,IAAAA,YAAY,GAAGH,GAAG,CAACO,OAAJ,CAAY,eAAZ,CAAf;AACH,GAFD,MAGK,IAAIH,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,MAA5B,EAAmC;AACpCH,IAAAA,YAAY,GAAGH,GAAG,CAACQ,IAAJ,CAASC,KAAxB;AACH,GAFI,MAGA;AACDN,IAAAA,YAAY,GAAGH,GAAG,CAACO,OAAJ,CAAY,eAAZ,CAAf;AACH;;AACG,MAAI,OAAQJ,YAAR,KAA0B,WAA9B,EAA0C;AACrC;AACD,QAAIO,SAAS,GAAGP,YAAY,CAACQ,KAAb,CAAmB,GAAnB,CAAhB;AACA,QAAMC,WAAW,GAAGF,SAAS,CAAC,CAAD,CAA7B,CAHsC,CAI1C;;AACI,QAAGE,WAAH,EAAe;AACXnB,MAAAA,GAAG,CAACoB,MAAJ,CAAWD,WAAX,EAAuBR,OAAO,CAACC,GAAR,CAAYS,aAAnC,EAAkD,UAACC,GAAD,EAAMC,YAAN,EAAsB;AACpE,YAAGD,GAAH,EAAO;AACX;AACAd,UAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,YAAAA,aAAa,EAAC;AAAf,WAArB;AACK,SAHD,MAIK;AACDjB,UAAAA,IAAI;AACP;AACJ,OARD;AASH,KAVD,MAWK,CACD;AACH;AACJ,GAnBD,MAoBI;AACA;AACAD,IAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,MAAAA,aAAa,EAAC;AAAf,KAArB,EAFA,CAGA;AACH;AAEJ,CA7CD;;eA+CepB,W","sourceRoot":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\middleware\\","sourcesContent":["const jwt = require('jsonwebtoken');\r\nimport dotenv from \"dotenv\";\r\nimport  path  from \"path\";\r\n\r\ndotenv.config({path: path.resolve('./config.env')});\r\n\r\nconst requireAuth = (req, res, next)=>{\r\n\r\n    //grabbing token from the cookies section of the each and every request made\r\n    // const cookieToken = req.cookies.jwt;\r\n\r\n    //Grab the token from the header parts of the postman\r\n    // console.log(process.env.SECRET_KEY_DB);\r\n\r\n    // FORMAT of them coming back => Authorization: Bearer <access_token>\r\n    var bearerHeader;\r\nif (process.env.NODE_ENV == \"production\"){\r\n    bearerHeader = req.headers['authorization'];\r\n}\r\nelse if (process.env.NODE_ENV == \"test\"){\r\n    bearerHeader = req.body.token;\r\n} \r\nelse {\r\n    bearerHeader = req.headers['authorization'];\r\n}  \r\n    if (typeof (bearerHeader) !== 'undefined'){\r\n         //split the bearer from string to the array\r\n        let bearerArr = bearerHeader.split(\" \");\r\n        const bearerToken = bearerArr[1];\r\n    //get the token from the array\r\n        if(bearerToken){\r\n            jwt.verify(bearerToken,process.env.SECRET_KEY_DB, (err, decodedToken) =>{\r\n                if(err){\r\n            // res.redirect('/login');\r\n            res.status(401).json({Error_message:'The action require to login'});\r\n                }\r\n                else {\r\n                    next();\r\n                }\r\n            })\r\n        }\r\n        else {\r\n            // res.redirect('/login');\r\n        }\r\n    }\r\n    else{\r\n        // res.status(404).json({message: 'login to access the routes!'});\r\n        res.status(401).json({Error_message:'The action require to login'})\r\n        // res.status(401).send({message: 'login to access the routes!'});\r\n    }\r\n\r\n}\r\n\r\nexport default requireAuth;\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"96a145fa9b3c6c342095fc64d3e876a8ca394105","contentHash":"3c6bed87df25d7811b9d4337066783c940b72b85f7f028393fa0a4ebce5b27da"},"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\routes\\authRoutes.js":{"path":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\routes\\authRoutes.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":15},"end":{"line":5,"column":57}},"2":{"start":{"line":7,"column":22},"end":{"line":7,"column":61}},"3":{"start":{"line":9,"column":16},"end":{"line":9,"column":44}},"4":{"start":{"line":13,"column":0},"end":{"line":13,"column":45}},"5":{"start":{"line":14,"column":0},"end":{"line":14,"column":67}},"6":{"start":{"line":15,"column":0},"end":{"line":15,"column":65}},"7":{"start":{"line":16,"column":0},"end":{"line":16,"column":65}},"8":{"start":{"line":17,"column":0},"end":{"line":17,"column":64}},"9":{"start":{"line":18,"column":0},"end":{"line":18,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["authRoutes.js"],"names":["authRoute","express","Router","get","log","post","signup_post_contro","login_post_contro","put","logout_get_contro","get_all_users","module","exports"],"mappings":";;;;AAAA;;AAEA;;AADA,IAAMA,SAAS,GAAGC,oBAAQC,MAAR,EAAlB;;AAEA;AAEA;AACAF,SAAS,CAACG,GAAV,CAAc,QAAd,EAAwBC,mBAAxB;AACAJ,SAAS,CAACK,IAAV,CAAe,cAAf,EAA8BC,kCAA9B;AACAN,SAAS,CAACK,IAAV,CAAe,aAAf,EAA6BE,iCAA7B;AACAP,SAAS,CAACQ,GAAV,CAAc,cAAd,EAA6BC,iCAA7B;AACAT,SAAS,CAACG,GAAV,CAAc,iBAAd,EAAgCO,6BAAhC;AAEAC,MAAM,CAACC,OAAP,GAAiBZ,SAAjB","sourceRoot":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\routes\\","sourcesContent":["import express from 'express';\r\nconst authRoute = express.Router();\r\nimport {signup_post_contro,login_post_contro,logout_get_contro, get_all_users,log} from '../controller/authController';\r\n// import requireAuth from \"../middleware/authMiddleware\";\r\n\r\n// auth API\r\nauthRoute.get(\"/login\", log)\r\nauthRoute.post('/auth/signup',signup_post_contro );\r\nauthRoute.post('/auth/login',login_post_contro );\r\nauthRoute.put('/auth/logout',logout_get_contro);\r\nauthRoute.get('/auth/all-users',get_all_users);\r\n\r\nmodule.exports = authRoute;\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c8bff58e59428eb43b605b7aff73e48bfd33904e","contentHash":"94f64903fcd7f121d9429bad8265dfa4edb4db9acf2a2c33dd0535db0818f33d"},"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\controller\\authController.js":{"path":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\controller\\authController.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":130}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":17},"end":{"line":14,"column":70}},"6":{"start":{"line":16,"column":20},"end":{"line":16,"column":67}},"7":{"start":{"line":18,"column":14},"end":{"line":18,"column":55}},"8":{"start":{"line":20,"column":12},"end":{"line":20,"column":51}},"9":{"start":{"line":22,"column":0},"end":{"line":24,"column":3}},"10":{"start":{"line":26,"column":19},"end":{"line":43,"column":1}},"11":{"start":{"line":27,"column":15},"end":{"line":29,"column":3}},"12":{"start":{"line":31,"column":2},"end":{"line":34,"column":3}},"13":{"start":{"line":32,"column":4},"end":{"line":32,"column":50}},"14":{"start":{"line":33,"column":4},"end":{"line":33,"column":18}},"15":{"start":{"line":37,"column":2},"end":{"line":40,"column":3}},"16":{"start":{"line":38,"column":4},"end":{"line":38,"column":64}},"17":{"start":{"line":39,"column":4},"end":{"line":39,"column":18}},"18":{"start":{"line":46,"column":13},"end":{"line":46,"column":29}},"19":{"start":{"line":48,"column":18},"end":{"line":54,"column":1}},"20":{"start":{"line":49,"column":2},"end":{"line":53,"column":5}},"21":{"start":{"line":56,"column":10},"end":{"line":65,"column":1}},"22":{"start":{"line":57,"column":2},"end":{"line":60,"column":5}},"23":{"start":{"line":61,"column":2},"end":{"line":64,"column":5}},"24":{"start":{"line":67,"column":0},"end":{"line":67,"column":18}},"25":{"start":{"line":69,"column":38},"end":{"line":124,"column":3}},"26":{"start":{"line":70,"column":13},"end":{"line":119,"column":5}},"27":{"start":{"line":73,"column":4},"end":{"line":118,"column":33}},"28":{"start":{"line":74,"column":6},"end":{"line":117,"column":7}},"29":{"start":{"line":75,"column":8},"end":{"line":116,"column":9}},"30":{"start":{"line":77,"column":12},"end":{"line":77,"column":89}},"31":{"start":{"line":78,"column":12},"end":{"line":78,"column":31}},"32":{"start":{"line":79,"column":12},"end":{"line":79,"column":34}},"33":{"start":{"line":80,"column":12},"end":{"line":80,"column":30}},"34":{"start":{"line":81,"column":12},"end":{"line":81,"column":30}},"35":{"start":{"line":82,"column":12},"end":{"line":85,"column":15}},"36":{"start":{"line":88,"column":12},"end":{"line":88,"column":33}},"37":{"start":{"line":89,"column":12},"end":{"line":89,"column":42}},"38":{"start":{"line":90,"column":12},"end":{"line":93,"column":15}},"39":{"start":{"line":94,"column":12},"end":{"line":94,"column":31}},"40":{"start":{"line":95,"column":12},"end":{"line":100,"column":15}},"41":{"start":{"line":101,"column":12},"end":{"line":101,"column":31}},"42":{"start":{"line":102,"column":12},"end":{"line":102,"column":18}},"43":{"start":{"line":105,"column":12},"end":{"line":105,"column":31}},"44":{"start":{"line":106,"column":12},"end":{"line":106,"column":47}},"45":{"start":{"line":107,"column":12},"end":{"line":107,"column":46}},"46":{"start":{"line":108,"column":12},"end":{"line":110,"column":15}},"47":{"start":{"line":111,"column":12},"end":{"line":111,"column":39}},"48":{"start":{"line":115,"column":12},"end":{"line":115,"column":35}},"49":{"start":{"line":121,"column":2},"end":{"line":123,"column":4}},"50":{"start":{"line":122,"column":4},"end":{"line":122,"column":39}},"51":{"start":{"line":129,"column":0},"end":{"line":129,"column":48}},"52":{"start":{"line":131,"column":37},"end":{"line":183,"column":3}},"53":{"start":{"line":132,"column":14},"end":{"line":178,"column":5}},"54":{"start":{"line":135,"column":4},"end":{"line":177,"column":34}},"55":{"start":{"line":136,"column":6},"end":{"line":176,"column":7}},"56":{"start":{"line":137,"column":8},"end":{"line":175,"column":9}},"57":{"start":{"line":139,"column":12},"end":{"line":139,"column":92}},"58":{"start":{"line":140,"column":12},"end":{"line":140,"column":41}},"59":{"start":{"line":142,"column":12},"end":{"line":142,"column":31}},"60":{"start":{"line":143,"column":12},"end":{"line":143,"column":31}},"61":{"start":{"line":144,"column":12},"end":{"line":144,"column":64}},"62":{"start":{"line":147,"column":12},"end":{"line":147,"column":34}},"63":{"start":{"line":148,"column":12},"end":{"line":148,"column":42}},"64":{"start":{"line":149,"column":12},"end":{"line":149,"column":31}},"65":{"start":{"line":150,"column":12},"end":{"line":153,"column":15}},"66":{"start":{"line":155,"column":12},"end":{"line":161,"column":15}},"67":{"start":{"line":162,"column":12},"end":{"line":162,"column":32}},"68":{"start":{"line":163,"column":12},"end":{"line":163,"column":18}},"69":{"start":{"line":166,"column":12},"end":{"line":166,"column":32}},"70":{"start":{"line":167,"column":12},"end":{"line":167,"column":49}},"71":{"start":{"line":168,"column":12},"end":{"line":170,"column":15}},"72":{"start":{"line":174,"column":12},"end":{"line":174,"column":36}},"73":{"start":{"line":180,"column":2},"end":{"line":182,"column":4}},"74":{"start":{"line":181,"column":4},"end":{"line":181,"column":40}},"75":{"start":{"line":185,"column":0},"end":{"line":185,"column":46}},"76":{"start":{"line":187,"column":24},"end":{"line":206,"column":1}},"77":{"start":{"line":188,"column":2},"end":{"line":190,"column":5}},"78":{"start":{"line":191,"column":19},"end":{"line":191,"column":47}},"79":{"start":{"line":193,"column":2},"end":{"line":205,"column":5}},"80":{"start":{"line":196,"column":4},"end":{"line":204,"column":5}},"81":{"start":{"line":197,"column":6},"end":{"line":199,"column":9}},"82":{"start":{"line":201,"column":6},"end":{"line":203,"column":9}},"83":{"start":{"line":208,"column":0},"end":{"line":208,"column":46}},"84":{"start":{"line":210,"column":20},"end":{"line":219,"column":1}},"85":{"start":{"line":211,"column":2},"end":{"line":218,"column":5}},"86":{"start":{"line":212,"column":4},"end":{"line":212,"column":32}},"87":{"start":{"line":215,"column":4},"end":{"line":217,"column":7}},"88":{"start":{"line":221,"column":0},"end":{"line":221,"column":38}}},"fnMap":{"0":{"name":"handleErrors","decl":{"start":{"line":26,"column":28},"end":{"line":26,"column":40}},"loc":{"start":{"line":26,"column":48},"end":{"line":43,"column":1}},"line":26},"1":{"name":"createToken","decl":{"start":{"line":48,"column":27},"end":{"line":48,"column":38}},"loc":{"start":{"line":48,"column":43},"end":{"line":54,"column":1}},"line":48},"2":{"name":"log","decl":{"start":{"line":56,"column":19},"end":{"line":56,"column":22}},"loc":{"start":{"line":56,"column":33},"end":{"line":65,"column":1}},"line":56},"3":{"name":"(anonymous_3)","decl":{"start":{"line":69,"column":38},"end":{"line":69,"column":39}},"loc":{"start":{"line":69,"column":50},"end":{"line":124,"column":1}},"line":69},"4":{"name":"_callee","decl":{"start":{"line":70,"column":100},"end":{"line":70,"column":107}},"loc":{"start":{"line":70,"column":118},"end":{"line":119,"column":3}},"line":70},"5":{"name":"_callee$","decl":{"start":{"line":73,"column":49},"end":{"line":73,"column":57}},"loc":{"start":{"line":73,"column":68},"end":{"line":118,"column":5}},"line":73},"6":{"name":"signup_post_contro","decl":{"start":{"line":121,"column":18},"end":{"line":121,"column":36}},"loc":{"start":{"line":121,"column":46},"end":{"line":123,"column":3}},"line":121},"7":{"name":"(anonymous_7)","decl":{"start":{"line":131,"column":37},"end":{"line":131,"column":38}},"loc":{"start":{"line":131,"column":49},"end":{"line":183,"column":1}},"line":131},"8":{"name":"_callee2","decl":{"start":{"line":132,"column":101},"end":{"line":132,"column":109}},"loc":{"start":{"line":132,"column":120},"end":{"line":178,"column":3}},"line":132},"9":{"name":"_callee2$","decl":{"start":{"line":135,"column":49},"end":{"line":135,"column":58}},"loc":{"start":{"line":135,"column":70},"end":{"line":177,"column":5}},"line":135},"10":{"name":"login_post_contro","decl":{"start":{"line":180,"column":18},"end":{"line":180,"column":35}},"loc":{"start":{"line":180,"column":46},"end":{"line":182,"column":3}},"line":180},"11":{"name":"logout_get_contro","decl":{"start":{"line":187,"column":33},"end":{"line":187,"column":50}},"loc":{"start":{"line":187,"column":61},"end":{"line":206,"column":1}},"line":187},"12":{"name":"(anonymous_12)","decl":{"start":{"line":195,"column":5},"end":{"line":195,"column":6}},"loc":{"start":{"line":195,"column":28},"end":{"line":205,"column":3}},"line":195},"13":{"name":"get_all_users","decl":{"start":{"line":210,"column":29},"end":{"line":210,"column":42}},"loc":{"start":{"line":210,"column":53},"end":{"line":219,"column":1}},"line":210},"14":{"name":"(anonymous_14)","decl":{"start":{"line":211,"column":36},"end":{"line":211,"column":37}},"loc":{"start":{"line":211,"column":53},"end":{"line":213,"column":3}},"line":211},"15":{"name":"(anonymous_15)","decl":{"start":{"line":213,"column":14},"end":{"line":213,"column":15}},"loc":{"start":{"line":213,"column":31},"end":{"line":218,"column":3}},"line":213}},"branchMap":{"0":{"loc":{"start":{"line":31,"column":2},"end":{"line":34,"column":3}},"type":"if","locations":[{"start":{"line":31,"column":2},"end":{"line":34,"column":3}},{"start":{"line":31,"column":2},"end":{"line":34,"column":3}}],"line":31},"1":{"loc":{"start":{"line":37,"column":2},"end":{"line":40,"column":3}},"type":"if","locations":[{"start":{"line":37,"column":2},"end":{"line":40,"column":3}},{"start":{"line":37,"column":2},"end":{"line":40,"column":3}}],"line":37},"2":{"loc":{"start":{"line":75,"column":8},"end":{"line":116,"column":9}},"type":"switch","locations":[{"start":{"line":76,"column":10},"end":{"line":85,"column":15}},{"start":{"line":87,"column":10},"end":{"line":102,"column":18}},{"start":{"line":104,"column":10},"end":{"line":111,"column":39}},{"start":{"line":113,"column":10},"end":{"line":113,"column":18}},{"start":{"line":114,"column":10},"end":{"line":115,"column":35}}],"line":75},"3":{"loc":{"start":{"line":137,"column":8},"end":{"line":175,"column":9}},"type":"switch","locations":[{"start":{"line":138,"column":10},"end":{"line":144,"column":64}},{"start":{"line":146,"column":10},"end":{"line":163,"column":18}},{"start":{"line":165,"column":10},"end":{"line":170,"column":15}},{"start":{"line":172,"column":10},"end":{"line":172,"column":18}},{"start":{"line":173,"column":10},"end":{"line":174,"column":36}}],"line":137},"4":{"loc":{"start":{"line":196,"column":4},"end":{"line":204,"column":5}},"type":"if","locations":[{"start":{"line":196,"column":4},"end":{"line":204,"column":5}},{"start":{"line":196,"column":4},"end":{"line":204,"column":5}}],"line":196},"5":{"loc":{"start":{"line":216,"column":15},"end":{"line":216,"column":81}},"type":"binary-expr","locations":[{"start":{"line":216,"column":15},"end":{"line":216,"column":28}},{"start":{"line":216,"column":32},"end":{"line":216,"column":81}}],"line":216}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":3,"21":1,"22":0,"23":0,"24":1,"25":1,"26":1,"27":3,"28":6,"29":7,"30":3,"31":3,"32":3,"33":3,"34":3,"35":3,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":2,"44":2,"45":2,"46":2,"47":2,"48":3,"49":1,"50":3,"51":1,"52":1,"53":1,"54":2,"55":4,"56":6,"57":2,"58":2,"59":2,"60":2,"61":2,"62":2,"63":2,"64":2,"65":2,"66":2,"67":2,"68":2,"69":0,"70":0,"71":0,"72":2,"73":1,"74":2,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":0,"83":1,"84":1,"85":1,"86":1,"87":0,"88":1},"f":{"0":2,"1":3,"2":0,"3":1,"4":3,"5":6,"6":3,"7":1,"8":2,"9":4,"10":2,"11":1,"12":1,"13":1,"14":1,"15":0},"b":{"0":[1,1],"1":[1,0],"2":[3,1,2,3,3],"3":[2,2,0,2,2],"4":[1,0],"5":[0,0]},"inputSourceMap":{"version":3,"sources":["authController.js"],"names":["dotenv","config","path","resolve","handleErrors","error","errors","message","code","includes","maxAge","createToken","id","jwt","sign","process","env","SECRET_KEY_DB","expiresIn","log","req","res","cookie","httpOnly","send","test","signup_post_contro","body","email","password","console","Userdb","create","user","token","_id","status","json","userCred","login_post_contro","login","response","logout_get_contro","authHeader","headers","logout","err","msg","get_all_users","find","then","users"],"mappings":"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","sourceRoot":"C:\\Users\\Sylvain.DESKTOP-CPV7DL5\\Desktop\\Brand_Test\\My Blog\\My_brand_MEN\\server\\controller\\","sourcesContent":["import Userdb from '../model/authModel';\r\nimport jwt from 'jsonwebtoken';\r\nimport dotenv from \"dotenv\";\r\nimport path from \"path\";\r\n\r\ndotenv.config({ path: path.resolve('./config.env') });\r\n\r\nconst handleErrors = (error) => {\r\n    let errors = { message:\"\"};\r\n    //duplicate error checking\r\n    if (error.code == 11000) {\r\n        errors['message'] = \"The user already exists\";\r\n        return errors;\r\n    }\r\n    //validation errors\r\n    if (error.message.includes('user validation failed')) {\r\n        errors['message'] = \"Enter minimum 6 character of password\";\r\n        return errors;\r\n        };\r\n    }\r\n\r\n//function for CREATING A TOKEN FOR AUTHENTICATION\r\nconst maxAge = 3 * 24 * 60 * 60;\r\nconst createToken = (id) => {\r\n    return jwt.sign({ id }, process.env.SECRET_KEY_DB, {\r\n        expiresIn: maxAge\r\n    })\r\n}\r\n\r\nexport const log =  (req,res)=>{\r\n    res.cookie(\"ERIKE\",\"RWANDA\",{httpOnly:true, maxAge:maxAge});\r\n    res.send({\r\n        message:\"welcome WILLIAMS AMARURAWE to the routes COOKIES\",\r\n        test:\"no it is not you whom i need\"\r\n})\r\n}\r\n\r\nexport const signup_post_contro = async (req, res) => {\r\n    const { email, password } = req.body;\r\n    console.log(email);\r\n    console.log(password);\r\n    try {\r\n        const user = await Userdb.create({ email, password });\r\n        const token = createToken(user._id);\r\n           res.cookie('jwt', token, {\r\n               httpOnly:true, maxAge: maxAge * 1000\r\n           })\r\n           console.log(token);\r\n        res.status(201).json({\r\n            userCred: {\r\n                email: user.email,\r\n            }, token: token \r\n        })\r\n    }\r\n    catch (err) {\r\n        const error = handleErrors(err);\r\n        res.status(400).json({ message: error.message });\r\n        console.log(error.message)\r\n        // console.log(err.message);\r\n    }\r\n}\r\n\r\n// export const login = (req,res) =>{\r\n//     res.send({message:\"hello\"})\r\n// }\r\nexport const login_post_contro = async (req, res) => {\r\n    const { email, password } = req.body;\r\n    console.log(email, password)\r\n    // res.send({message:\"hello\"})\r\n    try {\r\n        const user = await Userdb.login(email, password);\r\n        const token = createToken(user._id);\r\n        console.log(token)\r\n        res.cookie('jwt', token, {\r\n        httpOnly:true, maxAge: maxAge * 1000\r\n        })\r\n        // res.status(200).json({user:user._id,token:token})\r\n        res.status(200).send({\r\n            userCred: {\r\n                email: user.email,\r\n                message: \"Welcome again, it is pleasure to have you back!\"\r\n            },  token: token\r\n        })\r\n    }\r\n    catch (err) {\r\n        res.status(401).json({ response: err.message });\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const logout_get_contro = (req, res) => {\r\n    res.cookie('jwt', '', {maxAge:1 });\r\n    const authHeader = req.headers[\"authorization\"];\r\n    jwt.sign(authHeader, \"\", { expiresIn: 1 }, (logout, err) => {\r\n        if (logout) {\r\n            res.status(202).send({ msg: 'You have been Logged Out' });\r\n        }\r\n        else {\r\n            res.status(503).send({ msg: 'Error' });\r\n        }\r\n    }\r\n    );\r\n};\r\n\r\n\r\nexport const get_all_users = (req, res) => {\r\n    Userdb.find()\r\n        .then((users) => {\r\n            res.status(202).send(users);\r\n        })\r\n        .catch((error) => {\r\n            // res.status(500).send({message:error.message || 'Error Occured while retrieving blog information'})\r\n            res.status(500).json({ message: error.message || 'Error Occured while retrieving blog information' })\r\n        })\r\n}\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8eaecfad910644be2ee4e0b802ae1e646b575d53","contentHash":"a0634912f1421ab471f5fcd8ec7d3570f914b05f19344ff7e86606c3742938fe"}}